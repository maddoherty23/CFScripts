!function(){const t={init(){this.r=document.createElement("iframe"),this.r.id="ticketFrame",this.r.src="https://ticketgatorapp.netlify.app",this.r.style="width:100%;height:450px;border:none",this.i=document.createElement("div"),this.i.id="bookingInfo",this.i.style="display:none;margin:20px;padding:15px;background:#f8f9fa;border-radius:8px;border:1px solid #dee2e6",this.i.innerHTML='<div>Booking ID: <span id="bookingId" style="font-family:monospace;font-size:16px;color:#0066cc"></span></div><div>Status: <span id="status">Pending</span></div>',document.currentScript.parentElement.appendChild(this.r),document.currentScript.parentElement.appendChild(this.i),this.r.onload=()=>this.s(),window.addEventListener("message",t=>this.h(t))},s(){this.r.contentWindow.postMessage({type:"setVariables",data:{teamId:"1",apiUrl:"https://madgator-f55ad62309d2.herokuapp.com",eventId:"1"}},"https://ticketgatorapp.netlify.app")},async h(t){if("https://ticketgatorapp.netlify.app"!==t.origin)return;const{type:e,payload:n}=t.data;if("BOOKING_CREATED"===e){this.i.style.display="block",document.getElementById("bookingId").textContent=n.bookingId;try{const t=await fetch("https://madgator-f55ad62309d2.herokuapp.com/api/bookings/process",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),e=await t.json();document.getElementById("status").textContent="Confirmed",e.redirectUrl&&(window.location.href=e.redirectUrl)}catch(t){document.getElementById("status").textContent="Error"}}"heightUpdate"===e&&(this.r.style.height=n+"px")}};t.init()}();
